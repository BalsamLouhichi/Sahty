{% extends '@EasyAdmin/crud/index.html.twig' %}

{% block main %}
    <div class="lab-header">
        <a class="lab-back-link" href="{{ path('admin') }}">Retour Dashboard</a>
    </div>

    <section class="lab-stats">
        <div class="lab-card lab-card-primary">
            <div class="lab-card-title">Total laboratoires</div>
            <div class="lab-card-value">{{ lab_stats.total|default(0) }}</div>
        </div>
        <div class="lab-card lab-card-success">
            <div class="lab-card-title">Disponibles</div>
            <div class="lab-card-value">{{ lab_stats.disponibles|default(0) }}</div>
        </div>
        <div class="lab-card lab-card-danger">
            <div class="lab-card-title">Indisponibles</div>
            <div class="lab-card-value">{{ lab_stats.indisponibles|default(0) }}</div>
        </div>
    </section>

    <section class="lab-top-cities">
        <div class="lab-section-header">
            <h2 class="lab-section-title">Top villes</h2>
            <span class="lab-section-subtitle">Top 5</span>
        </div>
        <div class="lab-city-list">
            {% for row in lab_stats.top_villes|default([]) %}
                <div class="lab-city-item">
                    <span class="lab-city-name">{{ row.ville }}</span>
                    <span class="lab-city-count">{{ row.total }}</span>
                </div>
            {% else %}
                <div class="lab-city-empty">Aucune donnee.</div>
            {% endfor %}
        </div>
    </section>

    {{ parent() }}
{% endblock %}
